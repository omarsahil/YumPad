(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[686],{7598:function(e,s,a){Promise.resolve().then(a.bind(a,961))},961:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return x}});var t=a(7437),l=a(2265),r=a(9376),i=a(4196),c=a(3820),n=a(7648);let o=(0,a(9763).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);var d=a(5588),m=a(8466);function x(){let e=(0,r.useSearchParams)(),s=(0,r.useRouter)(),[a,x]=(0,l.useState)([]),[p,h]=(0,l.useState)(!0),[u,g]=(0,l.useState)(""),[f,j]=(0,l.useState)(()=>(null==e?void 0:e.get("category"))||"all"),[v,N]=(0,l.useState)("all"),[y,w]=(0,l.useState)([]),[b,k]=(0,l.useState)([]),{isSignedIn:C}=(0,d.aF)(),S=async()=>{h(!0);try{let e=new URLSearchParams;u&&e.append("search",u),"all"!==f&&e.append("category",f),"all"!==v&&e.append("dietary",v);let s=await fetch("/api/recipes?".concat(e.toString())),a=s.ok?await s.json():{recipes:[]},t=await fetch("/api/mealdb?search=".concat(encodeURIComponent(u))),l=t.ok?await t.json():{recipes:[]},r=new Set,i=[...a.recipes,...l.recipes].filter(e=>{let s=e.title.toLowerCase();return!r.has(s)&&(r.add(s),!0)}),c=i.filter(e=>e.title.toLowerCase().includes(u.toLowerCase()));x(c);let n=i.filter(e=>!e.title.toLowerCase().includes(u.toLowerCase()));w(n.slice(0,8))}catch(e){console.error("Error fetching recipes:",e)}finally{h(!1)}},E=async()=>{if(!C){k([]);return}try{let e=await fetch("/api/favorites");if(e.ok){let s=await e.json();k(s.favorites.map(e=>e.recipeId))}}catch(e){k([])}};(0,l.useEffect)(()=>{S(),E()},[C,f]),(0,l.useEffect)(()=>{let s=null==e?void 0:e.get("category");s&&s!==f&&j(s),s||"all"===f||j("all")},[e]);let A=()=>{S()},L=(e,s)=>{k(a=>s?[...a,e]:a.filter(s=>s!==e))};return(0,t.jsxs)("div",{className:"min-h-screen bg-cream",children:[(0,t.jsx)(i.default,{}),(0,t.jsxs)("main",{className:"pt-16",children:[(0,t.jsx)("section",{className:"bg-gradient-to-r from-emerald-600 to-emerald-800 text-white py-12 md:py-16",children:(0,t.jsxs)("div",{className:"container mx-auto px-4 text-center",children:[(0,t.jsx)("h1",{className:"text-3xl sm:text-4xl md:text-6xl font-playfair font-bold mb-4 text-white",children:"Explore All Recipes"}),(0,t.jsx)("p",{className:"text-lg sm:text-xl md:text-2xl mb-8 max-w-3xl mx-auto text-white",children:"Discover thousands of delicious recipes from around the world"})]})}),(0,t.jsx)("section",{className:"py-6 md:py-8 bg-white shadow-sm",children:(0,t.jsx)("div",{className:"container mx-auto px-2 sm:px-4",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row flex-wrap gap-4 items-center justify-center",children:[(0,t.jsx)("div",{className:"relative flex-1 w-full max-w-md",children:(0,t.jsx)("input",{type:"text",placeholder:"Search recipes...",value:u,onChange:e=>g(e.target.value),className:"input-field w-full",onKeyDown:e=>{"Enter"===e.key&&A()}})}),(0,t.jsx)("select",{value:f,onChange:e=>{j(e.target.value),"all"===e.target.value?s.push("/recipes"):s.push("/recipes?category=".concat(e.target.value))},className:"input-field w-full sm:w-auto min-w-[150px]",children:["all","breakfast","lunch","dinner","dessert","snack"].map(e=>(0,t.jsx)("option",{value:e,children:"all"===e?"All Categories":e.charAt(0).toUpperCase()+e.slice(1)},e))}),(0,t.jsx)("select",{value:v,onChange:e=>N(e.target.value),className:"input-field w-full sm:w-auto min-w-[150px]",children:["all","vegetarian","vegan","gluten-free","dairy-free","keto"].map(e=>(0,t.jsx)("option",{value:e,children:"all"===e?"All Dietary":e.charAt(0).toUpperCase()+e.slice(1)},e))}),(0,t.jsxs)("button",{onClick:A,className:"btn-primary flex items-center space-x-2 w-full sm:w-auto",children:[(0,t.jsx)(o,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:"Search"})]})]})})}),(0,t.jsx)("section",{className:"py-10 md:py-16",children:(0,t.jsx)("div",{className:"container mx-auto px-2 sm:px-4",children:p?(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-6 md:gap-8",children:[...Array(12)].map((e,s)=>(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden animate-pulse",children:[(0,t.jsx)("div",{className:"h-44 sm:h-56 bg-gray-300"}),(0,t.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-300 rounded mb-2"}),(0,t.jsx)("div",{className:"h-4 bg-gray-300 rounded mb-4"}),(0,t.jsx)("div",{className:"h-3 bg-gray-300 rounded mb-6"}),(0,t.jsx)("div",{className:"h-10 bg-gray-300 rounded"})]})]},s))}):a.length>0?(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-6 md:gap-8",children:a.map(e=>(0,t.jsx)(m.Z,{recipe:e,isFavorite:b.includes(e.id),onFavoriteToggle:L},e.id))}):(0,t.jsxs)("div",{className:"text-center py-20",children:[(0,t.jsx)("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-600 mb-4",children:"No recipes found"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Try adjusting your search or filter criteria"})]})})}),u&&y.length>0&&(0,t.jsx)("section",{className:"py-6 md:py-8",children:(0,t.jsxs)("div",{className:"container mx-auto px-2 sm:px-4",children:[(0,t.jsx)("h2",{className:"text-lg sm:text-xl font-bold mb-4",children:"Suggested Recipes"}),(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 md:gap-8",children:y.map(e=>(0,t.jsxs)(n.default,{href:"/recipes/".concat(e.id),className:"recipe-card group cursor-pointer block",children:[(0,t.jsxs)("div",{className:"relative h-44 sm:h-56 overflow-hidden",children:[(0,t.jsx)("img",{src:e.image,alt:e.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),(0,t.jsx)("div",{className:"absolute top-4 left-4",children:(0,t.jsx)("span",{className:"bg-emerald-500 text-white px-3 py-1 rounded-full text-xs sm:text-sm font-medium",children:e.category})}),(0,t.jsxs)("div",{className:"absolute bottom-4 left-4 bg-black/50 backdrop-blur-sm text-white px-3 py-1 rounded-full flex items-center space-x-1",children:[(0,t.jsxs)("span",{className:"text-xs sm:text-sm font-medium",children:["31 ",e.rating]}),(0,t.jsxs)("span",{className:"text-xs text-gray-300",children:["(",e.reviews,")"]})]})]}),(0,t.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,t.jsx)("h3",{className:"text-lg sm:text-xl font-bold font-playfair text-gray-900 mb-2 group-hover:text-emerald-600 transition-colors",children:e.title}),(0,t.jsx)("p",{className:"text-gray-600 text-xs sm:text-sm mb-4 line-clamp-2",children:e.description})]})]},e.id))})]})})]}),(0,t.jsx)(c.Z,{})]})}}},function(e){e.O(0,[11,232,729,196,132,971,117,744],function(){return e(e.s=7598)}),_N_E=e.O()}]);