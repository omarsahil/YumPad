"use strict";(()=>{var e={};e.id=224,e.ids=[224],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5258:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>h,patchFetch:()=>v,requestAsyncStorage:()=>d,routeModule:()=>l,serverHooks:()=>m,staticGenerationAsyncStorage:()=>g});var i={};t.r(i),t.d(i,{GET:()=>c,POST:()=>u});var a=t(9303),s=t(8716),n=t(670),o=t(7070),p=t(2663);async function c(e){try{let{searchParams:r}=new URL(e.url),t=r.get("search"),i=r.get("category"),a=parseInt(r.get("page")||"1"),s=parseInt(r.get("limit")||"12"),n={};t&&(n.title={contains:t,mode:"insensitive"}),i&&"all"!==i&&(n.category={equals:i,mode:"insensitive"});let[c,u]=await Promise.all([p._.recipe.findMany({where:n,skip:(a-1)*s,take:s,orderBy:{title:"asc"}}),p._.recipe.count({where:n})]);return o.NextResponse.json({recipes:c,pagination:{page:a,limit:s,total:u,pages:Math.ceil(u/s)}})}catch(e){return console.error("Error fetching recipes from database:",e),o.NextResponse.json({recipes:[],pagination:{page:1,limit:12,total:0,pages:1}})}}async function u(e){try{let r=await e.json(),t=await p._.recipe.create({data:{title:r.title,description:r.description,image:r.image,category:r.category,dietary:r.dietary||[],prepTime:r.prepTime,cookTime:r.cookTime,servings:r.servings,rating:r.rating||0,reviews:r.reviews||0,ingredients:r.ingredients||[],instructions:r.instructions||[],authorId:r.authorId}});return o.NextResponse.json({recipe:t},{status:201})}catch(e){return console.error("Error creating recipe:",e),o.NextResponse.json({error:"Internal server error"},{status:500})}}let l=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/recipes/route",pathname:"/api/recipes",filename:"route",bundlePath:"app/api/recipes/route"},resolvedPagePath:"C:\\Users\\mdoma\\Desktop\\recipe\\app\\api\\recipes\\route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:d,staticGenerationAsyncStorage:g,serverHooks:m}=l,h="/api/recipes/route";function v(){return(0,n.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:g})}},2663:(e,r,t)=>{t.d(r,{_:()=>a});let i=require("@prisma/client"),a=globalThis.prisma??new i.PrismaClient},9303:(e,r,t)=>{e.exports=t(517)}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),i=r.X(0,[510],()=>t(5258));module.exports=i})();